name: INECTA CI/CD

on:
  workflow_dispatch:

jobs:
  BranchCutOff:
    uses: ./.github/workflows/BranchCutOff.yaml
    secrets: inherit

  Build:
    needs: [ BranchCutOff ]
    uses: ./.github/workflows/CICD.yaml
    secrets: inherit

  Release:
    needs: [ BranchCutOff, Build ]
    uses: ./.github/workflows/CreateRelease.yaml
    with:
      name: ${{ needs.Build.outputs.RelVerTag }}
      tag: ${{ needs.Build.outputs.RelVerTag }}
      createReleaseBranch: "Y"
      directCommit: "Y"
    secrets: inherit
